-- -- -- -- -- -- -- -- -- -- -- -- -- -- --
-- Copy over distinct item entries from   --
-- DBC_ITEM-SPARSE to WORLD_ITEM_TEMPLATE --
-- -- -- -- -- -- -- -- -- -- -- -- -- -- --
START TRANSACTION;
INSERT INTO world.item_template (
	`entry`,
	`class`,
	`subclass`,
	`name`,
	`displayid`,
	`Quality`,
	`Flags`,
	`FlagsExtra`,
	`Flags3`,
	`Unk430_1`,
	`Unk430_2`,
	`BuyCount`,
	`SellPrice`,
	`InventoryType`,
	`ItemLevel`,
	`RequiredLevel`,
	`maxcount`,
	`stackable`,
	`ContainerSlots`,
	`stat_type1`,
	`stat_value1`,
	`stat_unk1_1`,
	`stat_unk2_1`,
	`stat_type2`,
	`stat_value2`,
	`stat_unk1_2`,
	`stat_unk2_2`,
	`stat_type3`,
	`stat_value3`,
	`stat_unk1_3`,
	`stat_unk2_3`,
	`stat_type4`,
	`stat_value4`,
	`stat_unk1_4`,
	`stat_unk2_4`,
	`stat_type5`,
	`stat_value5`,
	`stat_unk1_5`,
	`stat_unk2_5`,
	`stat_type6`,
	`stat_value6`,
	`stat_unk1_6`,
	`stat_unk2_6`,
	`stat_type7`,
	`stat_value7`,
	`stat_unk1_7`,
	`stat_unk2_7`,
	`stat_type8`,
	`stat_value8`,
	`stat_unk1_8`,
	`stat_unk2_8`,
	`stat_type9`,
	`stat_value9`,
	`stat_unk1_9`,
	`stat_unk2_9`,
	`stat_type10`,
	`stat_value10`,
	`stat_unk1_10`,
	`stat_unk2_10`,
	`ScalingStatDistribution`,
	`DamageType`,
	`delay`,
	`RangedModRange`,
	`spellid_1`,
	`spelltrigger_1`,
	`spellcharges_1`,
	`spellcooldown_1`,
	`spellcategory_1`,
	`spellcategorycooldown_1`,
	`spellid_2`,
	`spelltrigger_2`,
	`spellcharges_2`,
	`spellcooldown_2`,
	`spellcategory_2`,
	`spellcategorycooldown_2`,
	`spellid_3`,
	`spelltrigger_3`,
	`spellcharges_3`,
	`spellcooldown_3`,
	`spellcategory_3`,
	`spellcategorycooldown_3`,
	`spellid_4`,
	`spelltrigger_4`,
	`spellcharges_4`,
	`spellcooldown_4`,
	`spellcategory_4`,
	`spellcategorycooldown_4`,
	`spellid_5`,
	`spelltrigger_5`,
	`spellcharges_5`,
	`spellcooldown_5`,
	`spellcategory_5`,
	`spellcategorycooldown_5`,
	`bonding`,
	`description`,
	`PageText`,
	`LanguageID`,
	`PageMaterial`,
	`startquest`,
	`lockid`,
	`Material`,
	`sheath`,
	`RandomProperty`,
	`RandomSuffix`,
	`itemset`,
	`area`,
	`Map`,
	`BagFamily`,
	`TotemCategory`,
	`socketColor_1`,
	`socketContent_1`,
	`socketColor_2`,
	`socketContent_2`,
	`socketColor_3`,
	`socketContent_3`,
	`socketBonus`,
	`GemProperties`,
	`ArmorDamageModifier`,
	`duration`,
	`ItemLimitCategory`,
	`HolidayId`,
	`StatScalingFactor`,
	`WDBVerified`
)
SELECT 
	a.`id`,
	b.class,
	b.subclass,
	a.`name`,
	b.displayid,
	a.`quality`,
	a.`flags`,
	a.`flags2`,
	a.`flags3`,
	a.`Unk430_1`,
	a.`Unk430_2`,
	a.`buycount`,
	1,
	a.`inventorytype`,
	a.`itemlevel`,
	a.`requiredlevel`,
	a.`maxcount`,
	a.`stackable`,
	a.`containerslots`,
	IF(`stat_type1` < 0, 0, `stat_type1`),
	`stat_value1`,
	`stat_unk1_1`,
	`stat_unk2_1`,
	IF(`stat_type2` < 0, 0, `stat_type2`),
	`stat_value2`,
	`stat_unk1_2`,
	`stat_unk2_2`,
	IF(`stat_type3` < 0, 0, `stat_type3`),
	`stat_value3`,
	`stat_unk1_3`,
	`stat_unk2_3`,
	IF(`stat_type4` < 0, 0, `stat_type4`),
	`stat_value4`,
	`stat_unk1_4`,
	`stat_unk2_4`,
	IF(`stat_type5` < 0, 0, `stat_type5`),
	`stat_value5`,
	`stat_unk1_5`,
	`stat_unk2_5`,
	IF(`stat_type6` < 0, 0, `stat_type6`),
	`stat_value6`,
	`stat_unk1_6`,
	`stat_unk2_6`,
	IF(`stat_type7` < 0, 0, `stat_type7`),
	`stat_value7`,
	`stat_unk1_7`,
	`stat_unk2_7`,
	IF(`stat_type8` < 0, 0, `stat_type8`),
	`stat_value8`,
	`stat_unk1_8`,
	`stat_unk2_8`,
	IF(`stat_type9` < 0, 0, `stat_type9`),
	`stat_value9`,
	`stat_unk1_9`,
	`stat_unk2_9`,
	IF(`stat_type10` < 0, 0, `stat_type10`),
	`stat_value10`,
	`stat_unk1_10`,
	`stat_unk2_10`,
	`scalingstatdistribution`,
	`damagetype`,
	`delay`,
	`rangedmodrange`,
	`spellid_1`,
	`spelltrigger_1`,
	`spellcharges_1`,
	`spellcooldown_1`,
	`spellcategory_1`,
	`spellcategorycooldown_1`,
	`spellid_2`,
	`spelltrigger_2`,
	`spellcharges_2`,
	`spellcooldown_2`,
	`spellcategory_2`,
	`spellcategorycooldown_2`,
	`spellid_3`,
	`spelltrigger_3`,
	`spellcharges_3`,
	`spellcooldown_3`,
	`spellcategory_3`,
	`spellcategorycooldown_3`,
	`spellid_4`,
	`spelltrigger_4`,
	`spellcharges_4`,
	`spellcooldown_4`,
	`spellcategory_4`,
	`spellcategorycooldown_4`,
	`spellid_5`,
	`spelltrigger_5`,
	`spellcharges_5`,
	`spellcooldown_5`,
	`spellcategory_5`,
	`spellcategorycooldown_5`,
	`bonding`,
	`description`,
	`pagetext`,
	`languageid`,
	`pagematerial`,
	`startquest`,
	`lockid`,
	a.`material`,
	a.`sheath`,
	`randomproperty`,
	`randomsuffix`,
	`itemset`,
	`area`,
	`map`,
	`bagfamily`,
	`totemcategory`,
	`socketColor_1`,
	`socketContent_1`,
	`socketColor_2`,
	`socketContent_2`,
	`socketColor_3`,
	`socketContent_3`,
	`socketbonus`,
	`gemproperties`,
	`armordamagemodifier`,
	`duration`,
	`itemlimitcategory`,
	`holidayid`,
	`statscalingfactor`,
	25480
FROM dbc.`dbc_item-sparse` a
INNER JOIN dbc.db2_item b ON 
NOT EXISTS (SELECT 1 FROM world.item_template c WHERE c.entry = a.id) AND a.id = b.id;
COMMIT;